<main>
    <div class="shop-section">
        <section class="detail mb-5">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6">
                        <div id="carouselExampleControls" class="carousel carousel-dark slide" data-bs-ride="carousel">
                            <div class="carousel-inner">
                                <div class="carousel-item active">
                                    <img src={{detail.[product_images.image_url]}} alt={{detail.name}}>
                                </div>
                                {{#each image }}
                                <div class="carousel-item">
                                    <img src={{image_url}} alt={{detail.name}}>
                                </div>
                                {{/each}}
                            </div>
                            <button class="carousel-control-prev" type="button"
                                data-bs-target="#carouselExampleControls" data-bs-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button"
                                data-bs-target="#carouselExampleControls" data-bs-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Next</span>
                            </button>
                        </div>
                    </div>
                    <div class="offset-lg-1 col-lg-5">
                        <div class="text-detail">
                            <input type="hidden" name="prodId" value={{detail.id}}>
                            <h3 class="name fw-bold my-2">{{detail.name}}</h3>
                            <h4 id="price" class="price fw-bold my-2">{{currencyFormat detail.price}}</h4>
                            <p><span>Category: </span>{{detail.[category.name]}}</p>
                            <p><span>Availability: </span>In Stock</p>
                            <p class="description my-5 py-4">{{detail.description}}</p>
                            <div class="product-count mb-5 row">
                                <div class="col-md-3">
                                    <label for="qty" class="">Quantity</label>
                                    <input type="number" class="form-control" id="qty" value="1" min="1" />
                                </div>
                                <div class="col-md-3">
                                    <label for="size" class="">Size</label>
                                    <select id="size" class="form-select">
                                        {{#each size }}
                                        <option>{{size}}</option>
                                        {{/each}}
                                    </select>
                                </div>
                            </div>
                            <div class="">
                                <a href="#" id="add-cart" class="rounded-pill btn py-3"><i
                                        class="fas fa-shopping-cart me-3"></i>Add To Cart</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section class="rating mb-5">
            <div class="container">
                <ul class="nav nav-tabs justify-content-center" role="tablist">
                    <li class="nav-item">
                        <a href="#description" class="nav-link m-1 mx-lg-3 rounded-pill active" id="description-tab"
                            data-bs-toggle="tab" aria-controls="description" aria-selected="true">Description</a>
                    </li>
                    <li class="nav-item">
                        <a href="#instock" class="nav-link m-1 mx-lg-3 rounded-pill" id="instock-tab"
                            data-bs-toggle="tab" aria-controls="instock">In Stock</a>
                    </li>
                    <li class="nav-item">
                        <a href="#review" class="nav-link m-1 mx-lg-3 rounded-pill" id="review-tab" data-bs-toggle="tab"
                            aria-controls="review">Review</a>
                    </li>
                </ul>
                <div class="tab-content border border-1">
                    <div class="tab-pane active" id="description" role="tabpanel" aria-labelledby="description-tab">
                        <p class="mb-2">{{detail.description}}</p>
                    </div>
                    <div class="tab-pane justfy-content-center" id="instock" role="tabpanel"
                        aria-labelledby="instock-tab">
                        <div class="offset-2 col-8">
                            <table class="table">
                                <thead>
                                    <td>Size</td>
                                    <td>Quantity</td>
                                </thead>
                                <tbody>
                                    {{#each size}}
                                    <tr>
                                        <td>{{size}}</td>
                                        <td>{{quantity}}</td>
                                    </tr>
                                    {{/each}}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="tab-pane" id="review" role="tabpanel" aria-labelledby="review-tab">
                        <div class="row  justify-content-center">
                            <div class="col-lg-8">
                                <div class="row mb-3">
                                    <div class="col-12 overall text-center mb-2">
                                        <h4 class="fw-bolder">Overall</h4>
                                        <h1>{{detail.rate}}</h1>
                                        <p id="total-rate"></p>
                                    </div>
                                    {{!-- <div class="col-md-6 rate-overall">
                                        <h5 class="mb-2 col-12 text-center">Base on 3 Reviews</h5>
                                        <ul>
                                            <li>
                                                <input type="hidden" class="rating" data-readonly value="5"
                                                    data-filled="fas fa-star" data-empty="far fa-star" />
                                                <span id="review-5" class="ms-3"></span>
                                            </li>
                                            <li>
                                                <input type="hidden" class="rating" data-readonly value="4"
                                                    data-filled="fas fa-star" data-empty="far fa-star" />
                                                <span id="review-4" class="ms-3"></span>
                                            </li>
                                            <li>
                                                <input type="hidden" class="rating" data-readonly value="3"
                                                    data-filled="fas fa-star" data-empty="far fa-star" />
                                                <span id="review-3" class="ms-3"></span>
                                            </li>
                                            <li>
                                                <input type="hidden" class="rating" data-readonly value="2"
                                                    data-filled="fas fa-star" data-empty="far fa-star" />
                                                <span id="review-2" class="ms-3"></span>
                                            </li>
                                            <li>
                                                <input type="hidden" class="rating" data-readonly value="1"
                                                    data-filled="fas fa-star" data-empty="far fa-star" />
                                                <span id="review-1" class="ms-3"></span>
                                            </li>
                                        </ul>
                                    </div> --}}
                                </div>
                                {{#if user}}
                                <div class="add-rating my-3">
                                    <h2 class="mb-2">Add a review</h2>
                                    <form class="review-form row">
                                        <input type="hidden" value="{{detail.id}}" />
                                        <div class="form-group mb-3">
                                            <label class="form-label" for="rate-form">Your Rating:</label>
                                            <input type="hidden" name="rate" class="rating" value="5"
                                                data-filled="fas fa-star fs-4" data-empty="far fa-star fs-4" />
                                        </div>
                                        <div class="form-group mb-3">
                                            <label class="form-label" for="content-form">Your Review:</label>
                                            <input class="form-control" type="text" placeholder="Your review"
                                                name="content" />
                                        </div>
                                        <div class="d-flex justify-content-end">
                                            <input class="col-md-3 btn mb-2 text-uppercase" type="submit" id="submit-review"
                                                value="Submit now" />
                                        </div>
                                    </form>
                                </div>                                    
                                {{/if}}
                                <div id="review-list">
                                </div>
                                <ul class="pagination justify-content-center">
                                </ul>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section class="top-seller my-5">
            <div class="container">
                <div class="homepage-intro mb-5">
                    <p class="mb-1">Related Item in the market</p>
                    <h2 class="section-title fw-bold mb-2">Related <span class="section-title-style pb-2">Product</span>
                    </h2>
                </div>
                <div class="row">
                    {{#each related}}
                    <div class="col-md-6 col-lg-4">
                        <div class="border border-1 px-3 m-2">
                            <div class="product d-flex py-3">
                                <a href="#"><img src={{'product_images.image_url'}} alt="product" class="rounded"></a>
                                <div class="detail ms-3">
                                    <a href="/product/{{id}}" class="fs-5">{{name}}</a>
                                    <div class="price">{{currencyFormat price}}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {{/each}}
                </div>
            </div>
        </section>
    </div>
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
        <div id="success-toast" class="toast align-items-center text-white bg-primary border-0" role="alert"
            aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body">
                    Item has been added to cart.
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"
                    aria-label="Close"></button>
            </div>
        </div>
    </div>
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
        <div id="review-length-noti-toast" class="toast align-items-center text-white bg-primary border-0" role="alert"
            aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body">
                    Your review cannot exceed 255 characters.
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"
                    aria-label="Close"></button>
            </div>
        </div>
    </div>
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
        <div id="review-special-char-toast" class="toast align-items-center text-white bg-danger border-0" role="alert"
            aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body">
                    Your reivew has special characters. 
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"
                    aria-label="Close"></button>
            </div>
        </div>
    </div>
</main>